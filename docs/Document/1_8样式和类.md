# 样式和类

在我们讨论 JavaScript 处理样式和类的方法之前--有一个重要的规则。希望它足够明显，但是我们仍然必须提到它。

通常有两种设置元素样式的方式:

1. 在 CSS 中创建一个类，并添加它:`<div class="...">
2. 将属性直接写入`style`:`<div style="...">`

JavaScript 既可以修改类，也可以修改`style`属性。

相较于将样式写入`style`属性，我们应该首选通过 css 类的方式来添加样式。仅当类"无法处理"时，才应该选择使用`style`属性的方式。

例如，如果我们动态地计算元素的坐标，并希望通过 JavaScript 来设置它们，那么使用`style`是可以接受的，如下所示:

```html
let top = /*复杂的计算*/ let left = /*复杂的计算*/ elem.style.left = left;
//例如 "123px",在运行时计算出的 elem.style.top = top; //例如 "456px"
```

对于其他情况，例如将文本设置为红色，添加一个背景图标--可以在 CSS 中对这些样式进行描述，然后添加类(JavaScript 可以做到)。这样更灵活，更易于支持。

## className 和 classList

更改类是脚本中最常见的操作之一。

在很久以前，JavaScript 中有一个限制:像`"class"`这样的保留字不能用作对象的属性。这一限制现在已经不存在了，但当时就不能存在像`elem.class`这样的`"class"`属性。

因此，对于类，引入了看起来类似的属性`"className"`:`elem.className`对应于`"class"`特性(attribute)。

例如:

```html
<body>
  <script>
    alert(document.body.className);
  </script>
</body>
```

如果我们对`elem.className`进行赋值，它将替换类中的整个字符串。有时，这正是我们所需要的，但通常我们希望添加/删除单个类。

这里还有另一个属性:`elem.classList`。

`elem.classList`是一个特殊的对象，它具有
`add/remove/toggle`单个类的方法。

例如:

```html
<body class="main page">
  <script>
    //添加一个 class
    document.body.classList.add("article");

    alert(document.body.className); // main page article
  </script>
</body>
```

因此，我们既可以使用`className`对完整的类字符串进行操作，也可以使用`classList`对单个类进行操作。我们选择什么取决于我们的需求。

`classList`的方法:

- `elem.classList.add/remove(class)`--添加/移除类。
- `elem.classList.toggle(class)`--如果类不存在就添加类，存在就移除它。
- `elem.classList.contains(class)`--检查给定类，返回`true/false`。

此外，`classList`是可迭代的，因此，我们可以像下面这样列出所有类:

```html
<body class="main page">
  <script>
    for (let name of document.body.classList) {
      alert(name); //main,然后是page
    }
  </script>
</body>
```

## 元素样式

`elem.style`属性是一个对象，它对应于`"style"`特性(attribute)中所写的内容。

`elem.style.width="100px"`的效果等价于我们在`style`特性中有一个`width:100px`字符串。

对于多词(multi-word)属性，使用驼峰式 camelCase:

```js
background-color => elem.style.backgroundColor z-index => elem.style.zIndex
border-left-width=> elem.style.borderLeftWidth
```

例如:

```js
document.body.style.backgroundColor = prompt("background color?", "green");
```

> **前缀属性**
> 像`-moz-border-radius`和`-webkit-border-radius`这样的浏览器前缀属性，也遵循同样的规则:连字符`-`表示大写。
>
> 例如:
>
> ```html
> button.style.MozBorderRadius = "5px"; button.style.WebkitBorderRaduis = '5px';
> ```

## 重置样式属性

有时我们想要分配一个样式属性，稍后移除它。

例如，为了隐藏一个元素，我们可以设置
`elem.style.display = "none"`。

然后，稍后我们可能想要移除`style.display`，就像它没有被设置一样。这里不应该使用`delete`
`elem.style.display`，而应该使用`elem.style.display = ""`将其赋值为空。

```js
//如果我们运行这段代码，<body>将会闪烁
document.body.style.display = "none"; //隐藏

setTimeout(() => (document.body.style.display = ""), 1000);
恢复正常;
```

如果我们将`style.display`设置为空字符串，那么浏览器通常会应用 CSS 类以及内建样式，就好像根本没有这样的
`style.display`属性一样。

还有一个特殊的方法:
`elem.style.removeProperty('style property')`。所以，我们可以像这样删除一个属性:

```js
document.body.style.background = "red"; // 将 background 设置为红色

setTimeout(() => document.body.style.removeProperty("background"), 1000); // 1 秒后移除 background
```

> **用`style.cssText`进行完全的重写**
> 通常，我们使用`style.*`来对各个样式属性进行赋值。我们不能像这样的`div.style = "color:red;width:100px"`设置完整的属性，因为`div.style`是一个对象，并且它是只读的。
>
> 想要以字符串的形式设置完整的样式，可以使用特殊属性`style.cssText`:
>
> ```html
> <div id="div">Button</div>
>
> <script>
>   //我们可以在这里设置特殊的样式标记，例如"important"
>   div.style.cssText = `color:red !important;
> background-color:yellow;
> width:100px;
> text-align:center;
> `;
>
>   alert(div.style.cssText);
> </script>
> ```
>
> 我们很少使用这个属性，因为这样的赋值会删除所有现有样式:它不是进行添加，而是替换它们。有时可能会删除所需的内容。但是，当我们知道我们不会删除现有样式时，可以安全地将其用于新元素。
>
> 可以通过设置一个特性(attribute)来实现同样的效果:
> `div.setAttribute('style','color':red...');`

## 注意单位

不要忘记将 CSS 单位添加到值上。
