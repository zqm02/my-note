<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用 Mocha 进行自动化测试 | 我的笔记</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/my-note/assets/style.7f4671e1.css">
    <link rel="modulepreload" href="/my-note/assets/app.28edb484.js">
    <link rel="modulepreload" href="/my-note/assets/代码质量_3_5Mocha.md.3fc1eff3.lean.js">
    
    <meta name="keywords" content="我的笔记 一起学习 面试 面试经历 面经 ">
  <meta name="description" content="此文档主要用于记录个人学习笔记">
  <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6b5fd0a9><!--[--><!--]--><!--[--><span tabindex="-1" data-v-45f6ae50></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-45f6ae50> Skip to content </a><!--]--><!----><header class="VPNav" data-v-6b5fd0a9 data-v-0e356168><div class="VPNavBar has-sidebar" data-v-0e356168 data-v-8856f192><div class="container" data-v-8856f192><div class="VPNavBarTitle has-sidebar" data-v-8856f192 data-v-6a6f7ff6><a class="title" href="/my-note/" data-v-6a6f7ff6><!----><!--[-->我的笔记<!--]--></a></div><div class="content" data-v-8856f192><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8856f192 data-v-a30758ee><span id="main-nav-aria-label" class="visually-hidden" data-v-a30758ee>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/my-note/JS简介/1_1introduction.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->JS简介<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/my-note/JS基础知识/2_1HelloWorld.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->JS基础知识<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/my-note/代码质量/3_1debug.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->代码质量<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/my-note/Object基础知识/4_1Object.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->Object基础知识<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/my-note/数据类型/5_1PrimitivetypeMethods.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->数据类型<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/my-note/函数进阶内容/6_1recursion.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->函数进阶内容<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/my-note/对象属性配置/7_1AttributeTag.html" data-v-a30758ee data-v-8fba5fa8 data-v-5704c677><!--[-->对象属性配置<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-8856f192 data-v-311055f2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-311055f2 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-8856f192 data-v-0562f5c0 data-v-8dccea88><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-8dccea88><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-8dccea88><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-8dccea88><div class="VPMenu" data-v-8dccea88 data-v-e73581a2><!----><!--[--><!--[--><!----><div class="group" data-v-0562f5c0><div class="item appearance" data-v-0562f5c0><p class="label" data-v-0562f5c0>Appearance</p><div class="appearance-action" data-v-0562f5c0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-0562f5c0 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8856f192 data-v-6f008456><span class="container" data-v-6f008456><span class="top" data-v-6f008456></span><span class="middle" data-v-6f008456></span><span class="bottom" data-v-6f008456></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-6b5fd0a9 data-v-92b0f14a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-92b0f14a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-92b0f14a><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-92b0f14a>Menu</span></button><a class="top-link" href="#" data-v-92b0f14a> Return to top </a></div><aside class="VPSidebar" data-v-6b5fd0a9 data-v-55e4c7db><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-55e4c7db><span class="visually-hidden" id="sidebar-aria-label" data-v-55e4c7db> Sidebar Navigation </span><!--[--><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>JS简介</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/my-note/JS%E7%AE%80%E4%BB%8B/1_1introduction.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>1.1JS简介</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E7%AE%80%E4%BB%8B/1_2standard.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>1.2JS手册与规范</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E7%AE%80%E4%BB%8B/1_3code-editor.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>1.3编辑器</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E7%AE%80%E4%BB%8B/1_4console.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>1.4开发者控制台</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>JS基础知识</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_1HelloWorld.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.1Hello,World!</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_2code-structure.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.2代码结构</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_3use-strict.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.3现代模式，&#39;use strict&#39;</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_4variate.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.4变量</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_5DataType.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.5数据类型</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_6interact.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.6交互</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_7TypeCast.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.7类型转换</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_8BaseOperator.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.8基础运算符</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_9ValueComparison.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.9值的比较</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_10ConditionalBranch.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.10条件分支</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_11LogicalOperator.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.11逻辑运算符</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_12NullishCoalescing.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.12空值合并运算符</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_13circulation.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.13循环</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_14switch.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.14switch语句</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_15function.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.15函数</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_16FunctionExpression.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.16函数表达式</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_17ArrowFunction.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.17箭头函数</span><!--]--><!----></a><a class="VPLink link" href="/my-note/JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2_18JSspeciality.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.18JavaScript特性</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>代码质量</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/my-note/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/3_1debug.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>3.1在浏览器中调试</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/3_2CodeStyle.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>3.2代码风格</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/3_3annotation.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>3.3注释</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/3_4NinjaCode.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>3.4忍者代码</span><!--]--><!----></a><a class="VPLink link active" href="/my-note/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/3_5Mocha.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>3.5使用Mocha自动化测试</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/3_6Polyfill.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>3.6 Polyfill和转译器</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>Object基础知识</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/my-note/Object%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4_1Object.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>4.1对象</span><!--]--><!----></a><a class="VPLink link" href="/my-note/Object%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4_2copy.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>4.2对象引用和复制</span><!--]--><!----></a><a class="VPLink link" href="/my-note/Object%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4_3recycle.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>4.3垃圾回收</span><!--]--><!----></a><a class="VPLink link" href="/my-note/Object%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4_4method.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>4.4对象方法,“this”</span><!--]--><!----></a><a class="VPLink link" href="/my-note/Object%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4_5constructor.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>4.5构造器和操作符</span><!--]--><!----></a><a class="VPLink link" href="/my-note/Object%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4_6OptionalChain.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>4.6可选链</span><!--]--><!----></a><a class="VPLink link" href="/my-note/Object%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4_7symbol.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>4.7symbol类型</span><!--]--><!----></a><a class="VPLink link" href="/my-note/Object%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/4_8valueConversion.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>4.8对象--原始值转换</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>数据类型</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_1PrimitivetypeMethods.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.1原始类型的方法</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_2NumberType.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.2数字类型</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_3String.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.3字符串</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_4Array.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.4数组</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_5ArrayMethod.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.5数组方法</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_6IterableObject.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.6Iterable object(可迭代对象)</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_7MapSet.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.7Map and Set(映射和集合)</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_8WeakMapWeakSet.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.8WeakMap and WeakSet</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_9Objectkeys.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.9Object.keys,values,entries</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_10Destructuring.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.10解构赋值</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_11Date.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.11日期和时间</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5_12JSON.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.12JSON方法,toJSON</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>函数进阶内容</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/my-note/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9/6_1recursion.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6.1递归和堆栈</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9/6_2Rest.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6.2Rest参数与Spread语法</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9/6_3closure.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6.3变量作用域，闭包</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9/6_4var.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6.4老旧的“var”</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9/6_5globalObject.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6.5全局对象</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9/6_6FuncObj.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6.6函数对象,NFE</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9/6_7NewFunc.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6.7“new Function”语法</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9/6_8dispatch.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6.8调度:setTimeout和setInterval</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9/6_9Decorator.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6.9装饰器模式和转发,call/apply</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9/6_10FuncBind.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6.10函数绑定</span><!--]--><!----></a><a class="VPLink link" href="/my-note/%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6%E5%86%85%E5%AE%B9/6_11ArrowFunction.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>6.11深入理解箭头函数</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>对象属性配置</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/my-note/%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE/7_1AttributeTag.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>属性标志和属性描述符</span><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6b5fd0a9 data-v-a4c57a06><div class="VPDoc has-sidebar" data-v-a4c57a06 data-v-79ca2460><div class="container" data-v-79ca2460><div class="aside" data-v-79ca2460><div class="aside-curtain" data-v-79ca2460></div><div class="aside-container" data-v-79ca2460><div class="aside-content" data-v-79ca2460><div class="VPDocAside" data-v-79ca2460 data-v-779d834d><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-779d834d data-v-51e5a8ce><div class="content" data-v-51e5a8ce><div class="outline-marker" data-v-51e5a8ce></div><div class="outline-title" data-v-51e5a8ce>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-51e5a8ce><span class="visually-hidden" id="doc-outline-aria-label" data-v-51e5a8ce> Table of Contents for current page </span><ul class="root" data-v-51e5a8ce><!--[--><li style="" data-v-51e5a8ce><a class="outline-link" href="#我们为什么需要测试" data-v-51e5a8ce>我们为什么需要测试</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#行为驱动开发-bdd" data-v-51e5a8ce>行为驱动开发(BDD)</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#开发-pow-规范" data-v-51e5a8ce>开发 &quot;pow&quot; : 规范</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#开发流程" data-v-51e5a8ce>开发流程</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#行为规范" data-v-51e5a8ce>行为规范</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#初始实现" data-v-51e5a8ce>初始实现</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#改进规范" data-v-51e5a8ce>改进规范</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#改进实现" data-v-51e5a8ce>改进实现</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#嵌套描述" data-v-51e5a8ce>嵌套描述</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#延伸规范" data-v-51e5a8ce>延伸规范</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#总结" data-v-51e5a8ce>总结</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-779d834d></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-79ca2460><div class="content-container" data-v-79ca2460><!--[--><!--]--><main class="main" data-v-79ca2460><div style="position:relative;" class="vp-doc _my-note_%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F_3_5Mocha" data-v-79ca2460><div><h1 id="使用-mocha-进行自动化测试" tabindex="-1">使用 Mocha 进行自动化测试 <a class="header-anchor" href="#使用-mocha-进行自动化测试" aria-hidden="true">#</a></h1><p>自动化测试将被用于进一步的任务中，并且还将被广泛应用于实际项目中。</p><h2 id="我们为什么需要测试" tabindex="-1">我们为什么需要测试 <a class="header-anchor" href="#我们为什么需要测试" aria-hidden="true">#</a></h2><p>当我们写一个函数时，我们通常可以想象出它应该做什么：哪些参数会给出哪些结果。</p><p>在开发期间，我们可以通过运行程序来检查它并将结果与预期进行比较。例如，我们可以在控制台中这么做。</p><p>如果出了问题--那么我们会修复代码，然后再一次运行并检查结果--直到它工作为止。</p><p>但这样的手动&quot;重新运行&quot;是不完美的。</p><p><strong>当通过手动重新运行来测试代码时，很容易漏掉一些东西</strong></p><p>例如，我们要创建一个函数<code>f</code>。写一些代码，然后测试：<code>f(1)</code>可以执行，但是<code>f(2)</code>不能执行。我们修复了一下代码，现在<code>f(2)</code>可以执行了。看起来已经搞定了？但是我们忘了重新测试<code>f(1)</code>。这样有可能会导致出现错误。</p><p>这是非常典型的。当我们在开发一些东西时，我们会保留很多可能需要的用例。但是不要想着程序员在每一次代码修复后都去检查所有的案例。所以这就很容易造成修复了一个问题却造成另一个问题的情况。</p><p><strong>自动化测试意味着测试是独立于代码的。它们以各种方式运行我们的函数，并将结果与预期结果进行比较。</strong></p><h2 id="行为驱动开发-bdd" tabindex="-1">行为驱动开发(BDD) <a class="header-anchor" href="#行为驱动开发-bdd" aria-hidden="true">#</a></h2><p>我们来使用一种名为 <a href="http://en.wikipedia.org/wiki/Behavior-driven_development" target="_blank" rel="noopener noreferrer">行为驱动开发</a> 或简言为 BDD 的技术。</p><p><strong>BDD 包含了三部分内容：测试、文档和示例。</strong></p><p>为了理解 BDD，我们将研究一个实际开发案例。</p><h2 id="开发-pow-规范" tabindex="-1">开发 &quot;pow&quot; : 规范 <a class="header-anchor" href="#开发-pow-规范" aria-hidden="true">#</a></h2><p>我们想要创建一个函数<code>pow(x,n)</code>来计算<code>x</code>的<code>n</code>次幂(<code>n</code>为整数)。我们假设<code>n≥0</code>。</p><p>这个任务只是一个例子：JavaScript 中有一个<code>**</code>运算符可以用于幂运算。但是在这里我们专注于可以应用于更复杂任务的开发流程上。</p><p>在创建函数<code>pow</code>之前，我们可以想象函数应该做什么并且描述出来。</p><p>这样的描述被称为<strong>规范(specification,spec)</strong>，包含用例的描述以及针对它们的测试，如下所示:</p><div class="language-js line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#6C7834;">describe</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;pow&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">it</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;raises to n-th power&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">assert</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">equal</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">3</span><span style="color:#8E8F8B;">),</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">8</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">});</span></span>
<span class="line"><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>正如你所看到的，一个规范包含三个主要的模块：</p><p><code>describe(&quot;pow&quot;,function() {...}</code> 表示我们正在描述的功能是什么。在我们的例子中我们正在描述函数<code>pow</code>。用于组织&quot;工人(workers)&quot;--<code>it</code>代码块。</p><p><code>it(&quot;use case description&quot;, function() {...})</code><code>it</code>里面的描述部分，我们以一种<strong>易于理解</strong>的方式描述特定的用例，第二个参数是用于对其进行测试的函数。</p><p><code>assert.*</code>函数用于检查<code>pow</code>函数是否按照预期工作。在这里我们使用了其中之一--<code>assert.equal</code>,它会对参数进行比较，如果它们不相等则会抛出一个错误。这里它检查了<code>pow(2,3)</code>的值是否等于<code>8</code>。还有其他类型的比较和检查，我们将在后面介绍到。</p><p>规范可以被执行，它将运行在<code>it</code>块中指定的测试。我们稍后会看到。</p><h2 id="开发流程" tabindex="-1">开发流程 <a class="header-anchor" href="#开发流程" aria-hidden="true">#</a></h2><p>开发流程通常看起来像这样：<br> 1.编写初始规范，测试最基本的功能。<br> 2.创建一个最初始的实现。<br> 3.检查它是否工作，我们运行测试框架<a href="http://mochajs.org/" target="_blank" rel="noopener noreferrer">Mocha</a>(很快会有更多细节)来运行测试。当功能未完成时，将显示错误。我们持续修正直到一切都能工作。<br> 4，现在我们有一个带有测试的能工作的初步实现。<br> 5.我们增加更多的用例到规范中，或许目前的程序实现还不支持。无法通过测试。<br> 6，回到第 3 步，更新程序直到测试不会抛出错误。<br> 7.重复第 3 步到第 6 步，直到功能完善。</p><p>如此看来，开发就是不断地<strong>迭代</strong>。我们写规范，实现它，确保测试通过，然后写更多的测试，确保它们工作等等。最后，我们有了一个能工作的实现和针对它的测试。</p><p>让我们在我们的开发案例中看看这个开发流程吧。</p><p>在我们的案例中，第一步已经完成了：我们有一个针对<code>pow</code>的初始规范。因此让我们来实现它吧。但在此之前，让我们用一些 JavaScript 库来运行测试，就是看看测试是通过了还是失败了。</p><h2 id="行为规范" tabindex="-1">行为规范 <a class="header-anchor" href="#行为规范" aria-hidden="true">#</a></h2><p>在本教程中，我们将使用一下 JavaScript 库进行测试：</p><ul><li><a href="http://mochajs.org/" target="_blank" rel="noopener noreferrer">Mocha</a>--核心框架：提供了包括通用型测试函数<code>describe</code>和<code>it</code>，以及用于运行测试的主函数。</li><li><a href="http://chaijs.com/" target="_blank" rel="noopener noreferrer">Chai</a>--提供很多断言(assertion)支持的库。它提供了很多不同的断言，现在我们只需要用<code>assert.equal</code>。</li><li><a href="http://sinonjs.org/" target="_blank" rel="noopener noreferrer">Sinon</a>--用于监视函数、模拟内建函数和其他函数的库，我们在后面才会用到它。</li></ul><p>这些库都既适用于浏览器端，也适用于服务器端。这里我们将使用浏览器端的变体。</p><p>包含这些框架和<code>pow</code>规范的完整的 HTML 页面：</p><div class="language-html line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#8E8F8B;">&lt;!</span><span style="color:#2F8A89;">DOCTYPE</span><span style="color:#393A34;"> </span><span style="color:#B58451;">html</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#8E8F8B;">&lt;</span><span style="color:#2F8A89;">html</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">&lt;</span><span style="color:#2F8A89;">head</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">&lt;!-- add mocha css, to show results --&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">&lt;</span><span style="color:#2F8A89;">link</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B58451;">rel</span><span style="color:#8E8F8B;">=</span><span style="color:#B56959;">&quot;stylesheet&quot;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#B58451;">href</span><span style="color:#8E8F8B;">=</span><span style="color:#B56959;">&quot;https://cdnjs.cloudflare.com/ajax/libs/mocha/3.2.0/mocha.css&quot;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">/&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">&lt;!-- add mocha framework code --&gt;</span></span>
<span class="line"><span style="color:#8E8F8B;">    &lt;</span><span style="color:#2F8A89;">script</span><span style="color:#393A34;"> </span><span style="color:#B58451;">src</span><span style="color:#8E8F8B;">=</span><span style="color:#B56959;">&quot;https://cdnjs.cloudflare.com/ajax/libs/mocha/3.2.0/mocha.js&quot;</span><span style="color:#8E8F8B;">&gt;&lt;/</span><span style="color:#2F8A89;">script</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#8E8F8B;">    &lt;</span><span style="color:#2F8A89;">script</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#8C862B;">mocha</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">setup</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;bdd&quot;</span><span style="color:#8E8F8B;">);</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// minimal setup</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">&lt;/</span><span style="color:#2F8A89;">script</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">&lt;!-- add chai --&gt;</span></span>
<span class="line"><span style="color:#8E8F8B;">    &lt;</span><span style="color:#2F8A89;">script</span><span style="color:#393A34;"> </span><span style="color:#B58451;">src</span><span style="color:#8E8F8B;">=</span><span style="color:#B56959;">&quot;https://cdnjs.cloudflare.com/ajax/libs/chai/3.5.0/chai.js&quot;</span><span style="color:#8E8F8B;">&gt;&lt;/</span><span style="color:#2F8A89;">script</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#8E8F8B;">    &lt;</span><span style="color:#2F8A89;">script</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#8E8F8B;">      </span><span style="color:#A0ADA0;">// chai has a lot of stuff, let&#39;s make assert global</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">assert</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">chai</span><span style="color:#8E8F8B;">.</span><span style="color:#8C862B;">assert</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">&lt;/</span><span style="color:#2F8A89;">script</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">&lt;/</span><span style="color:#2F8A89;">head</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">&lt;</span><span style="color:#2F8A89;">body</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#8E8F8B;">    &lt;</span><span style="color:#2F8A89;">script</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">n</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#A0ADA0;">/* function code is to be written, empty now */</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">&lt;/</span><span style="color:#2F8A89;">script</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">&lt;!-- the script with tests (describe, it...) --&gt;</span></span>
<span class="line"><span style="color:#8E8F8B;">    &lt;</span><span style="color:#2F8A89;">script</span><span style="color:#393A34;"> </span><span style="color:#B58451;">src</span><span style="color:#8E8F8B;">=</span><span style="color:#B56959;">&quot;test.js&quot;</span><span style="color:#8E8F8B;">&gt;&lt;/</span><span style="color:#2F8A89;">script</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">&lt;!-- the element with id=&quot;mocha&quot; will contain test results --&gt;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">&lt;</span><span style="color:#2F8A89;">div</span><span style="color:#393A34;"> </span><span style="color:#B58451;">id</span><span style="color:#8E8F8B;">=</span><span style="color:#B56959;">&quot;mocha&quot;</span><span style="color:#8E8F8B;">&gt;&lt;/</span><span style="color:#2F8A89;">div</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#A0ADA0;">&lt;!-- run tests! --&gt;</span></span>
<span class="line"><span style="color:#8E8F8B;">    &lt;</span><span style="color:#2F8A89;">script</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#8C862B;">mocha</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">run</span><span style="color:#8E8F8B;">();</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">&lt;/</span><span style="color:#2F8A89;">script</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">&lt;/</span><span style="color:#2F8A89;">body</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"><span style="color:#8E8F8B;">&lt;/</span><span style="color:#2F8A89;">html</span><span style="color:#8E8F8B;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>该页面可分为五个部分：</p><p>1.<code>&lt;head&gt;</code>--添加用于测试的第三方库和样式文件。<br> 2.<code>&lt;script&gt;</code>包含测试函数，在我们的例子中--和<code>pow</code>相关的代码。<br> 3.测试代码--在我们的案例中是名为<code>test.js</code>的脚本，它包含上面<code>describe(&quot;pow&quot;,...)</code>的那些代码。<br> 4.HTML 元素<code>&lt;div id=&quot;mocha&quot;&gt;</code>将被 Mocha 用来输出结果。<br> 5.可以使用<code>mocha.run()</code>命令来开始测试。</p><p>结果： <img src="/my-note/assets/Mocha.cff960b4.jpg" alt="图片"> 到目前为止，测试失败了，出现了一个错误。这是合乎逻辑的：我们的<code>pow</code>是一个空函数，因此<code>pow(2,3)</code>返回了<code>undefined</code>而不是<code>8</code>。</p><p>未来，我们会注意到有更多高级的测试工具，像是<a href="https://karma-runner.github.io/" target="_blank" rel="noopener noreferrer">karma</a>或其他的，使自动运行许多不同的测试变得更容易。</p><h2 id="初始实现" tabindex="-1">初始实现 <a class="header-anchor" href="#初始实现" aria-hidden="true">#</a></h2><p>为了可以通过测试，让我们写一个<code>pow</code>的简单实现：</p><div class="language-js line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">8</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;">// :) 我们作弊了！</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>wo!!!现在它可以工作了。 <img src="/my-note/assets/Mocha2.f91fe17c.jpg" alt="图片"></p><h2 id="改进规范" tabindex="-1">改进规范 <a class="header-anchor" href="#改进规范" aria-hidden="true">#</a></h2><p>我们所做的这些绝对是作弊。函数是不起作用的：尝试计算<code>pow(3,4)</code>的话就会得到一个不正确的结果，但是测试却通过了。</p><p>.....但是这种情况却是在实际中相当典型例子。测试通过了，但是函数却是错误的。我们的规范是不完善的。我们需要给它添加更多的测试用例。</p><p>这里我们又添加了一个测试来检查<code>pow(3,4) = 81</code>。</p><p>我们可以选择两种方式中的任意一种来组织测试代码：</p><p>1.第一种--在同一个<code>it</code>中再添加一个<code>assert</code>:</p><div class="language-js line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#6C7834;">describe</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;pow&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">it</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;raises to n-th power&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">assert</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">equal</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">3</span><span style="color:#8E8F8B;">),</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">8</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">assert</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">euqal</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#296AA3;">3</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">4</span><span style="color:#8E8F8B;">),</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">81</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">});</span></span>
<span class="line"><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>2，第二种--写两个测试:</p><div class="language-js line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#6C7834;">describe</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;pow&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">it</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;2 raised to power 3 is 8&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">assert</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">equal</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">3</span><span style="color:#8E8F8B;">),</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">8</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">it</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;3 raised to power 4 is 81&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">assert</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">equal</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#296AA3;">3</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">4</span><span style="color:#8E8F8B;">),</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">81</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">});</span></span>
<span class="line"><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>主要区别是，当<code>assert</code>触发一个错误时，<code>it</code>代码块会立即终止。因此，在第一个方式中，如果第一个<code>assert</code>失败了，我们将永远不会看到第二个<code>assert</code>的结果。</p><p>保持测试之间独立，有助于我们获知代码中正在发生什么，因此第二种方式更好一点。</p><p>除此之外，还有一个规范值得遵循。</p><p><strong>一个测试检查一个东西</strong></p><p>如果我们在看测试代码的时候，发现在其中有两个相互独立的检查--最好将它拆分成两个更简单的检查。</p><p>因此让我们继续使用第二种方式。</p><p>结果: <img src="/my-note/assets/Mocha3.20363209.jpg" alt="图片"></p><p>正如我们可以想到的，第二条测试失败了。当然，我们的函数总会返回<code>8</code>，而<code>assert</code>期望的是<code>81</code>。</p><h2 id="改进实现" tabindex="-1">改进实现 <a class="header-anchor" href="#改进实现" aria-hidden="true">#</a></h2><p>让我们写一些更加实际的代码来通过测试吧:</p><div class="language-js line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">n</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">result</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">for</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">(</span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">i</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">i</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">n</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">i</span><span style="color:#AB5959;">++</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">retulr</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">result</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>为了确保函数可以很好地工作，我们来使用更多值测试它吧。除了手动地编写<code>it</code>代码块，我们可以使用<code>for</code>循环来生成它们:</p><div class="language-js line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#6C7834;">describe</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;pow&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">makeTest</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">expected</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#6C7834;">it</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">`</span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">x</span><span style="color:#8E8F8B;">}</span><span style="color:#B56959;"> in the power 3 is </span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">expected</span><span style="color:#8E8F8B;">}</span><span style="color:#B56959;">`</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#8C862B;">assert</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">equal</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">3</span><span style="color:#8E8F8B;">),</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">expected</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">});</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">for</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">(</span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">5</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#AB5959;">++</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#6C7834;">makeTest</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>结果: <img src="/my-note/assets/Mocha4.aed50c26.jpg" alt="图片"></p><h2 id="嵌套描述" tabindex="-1">嵌套描述 <a class="header-anchor" href="#嵌套描述" aria-hidden="true">#</a></h2><p>我们继续添加更多的测试。但在此之前，我们需要注意到辅助函数<code>makeTest</code>和<code>for</code>应该被组合到一起。我们在其他测试中不需要<code>makeTest</code>，只有在<code>for</code>循环中需要它：它们共同的任务就是检查<code>pow</code>是如何自乘至给定的幂次方。</p><p>使用嵌套的<code>describe</code>来进行分组:</p><div class="language-js line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#6C7834;">describe</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;pow&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">describe</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;raises x to power 3&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">makeTest</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">expected</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#6C7834;">it</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">`</span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">x</span><span style="color:#8E8F8B;">}</span><span style="color:#B56959;"> in the power 3 is </span><span style="color:#8E8F8B;">${</span><span style="color:#B56959;">expected</span><span style="color:#8E8F8B;">}</span><span style="color:#B56959;">`</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#8C862B;">assert</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">equal</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">3</span><span style="color:#8E8F8B;">),</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">expected</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#8E8F8B;">});</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">for</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">(</span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">5</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#AB5959;">++</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#6C7834;">makeTest</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8E8F8B;">  </span><span style="color:#A0ADA0;">//....可以在这里写更多的测试代码，describe 和 it 都可以添加在这。</span></span>
<span class="line"><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>嵌套的<code>describe</code>定义了一个新的&quot;subgroup&quot;测试。在输出中我们可以看到带有标题的缩进: <img src="/my-note/assets/Mocha5.d479f4a5.jpg" alt="图片"> 将来，我们可以在顶级域中使用<code>it</code>和<code>describe</code>的辅助函数添加更多的<code>it</code>和<code>describe</code>，它们不会看到<code>makeTest</code>。</p><blockquote><p><code>before/after</code>和<code>beforeEach/afterEach</code> 我们可以设置<code>before/after</code>函数来在运行测试之前/之后执行。也可以使用<code>beforeEach/afterEach</code>函数来设置在执行<strong>每一个</strong><code>it</code>之前/之后执行。 例如:</p><div class="language-js line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#6C7834;">describe</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;test&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">before</span><span style="color:#8E8F8B;">(()</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">alert</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;Testing started - before all tests&quot;</span><span style="color:#8E8F8B;">));</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">after</span><span style="color:#8E8F8B;">(()</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">alert</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;Testing finished - after all tests&quot;</span><span style="color:#8E8F8B;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">beforeEach</span><span style="color:#8E8F8B;">(()</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">alert</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;Before a test - enter a test&quot;</span><span style="color:#8E8F8B;">));</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">afterEach</span><span style="color:#8E8F8B;">(()</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">alert</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;After a test - exit a test&quot;</span><span style="color:#8E8F8B;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">it</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;test 1&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">alert</span><span style="color:#8E8F8B;">(</span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">));</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">it</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;test 2&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">alert</span><span style="color:#8E8F8B;">(</span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">));</span></span>
<span class="line"><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>运行顺序将为:</p><div class="language- line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#393a34;"> Testing started - before all tests (before)</span></span>
<span class="line"><span style="color:#393a34;"> Before a test = enter a test (beforeEach)</span></span>
<span class="line"><span style="color:#393a34;"> 1</span></span>
<span class="line"><span style="color:#393a34;"> After a test - exit a test (afterEach)</span></span>
<span class="line"><span style="color:#393a34;"> Before a test - enter a test(beforeEach)</span></span>
<span class="line"><span style="color:#393a34;"> 2</span></span>
<span class="line"><span style="color:#393a34;"> After a test - exit a test  (afterEach)</span></span>
<span class="line"><span style="color:#393a34;"> Testing finished - after all tests (after)</span></span>
<span class="line"><span style="color:#393a34;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><a href="https://plnkr.co/edit/GbnfZaiQjI09SIgj?p=preview" target="_blank" rel="noopener noreferrer">Open the example in the sandbox</a> 通常，<code>beforeEach/afterEach</code>和<code>before/after</code>被用于执行初始化，清零计数器或一些介于每个测试(或测试组)之间的事情。</p></blockquote><h2 id="延伸规范" tabindex="-1">延伸规范 <a class="header-anchor" href="#延伸规范" aria-hidden="true">#</a></h2><p><code>pow</code>的基础功能已经完成了。第一次迭代开发完成了。当我们庆祝完后，继续改进它吧。</p><p>正如前面所说，函数<code>pow(x,n)</code>适用于正整数<code>n</code>。</p><p>JavaScript 函数通常会返回<code>NaN</code>以表示一个数学错误。接下来我们对无效的<code>n</code>值执行相同的操作。</p><p>让我们首先将这个行为加到规范中(!):</p><div class="language-js line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#6C7834;">describe</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;pow&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#8E8F8B;">  </span><span style="color:#A0ADA0;">//...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">it</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;for negative n the result is NaN&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">assert</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">isNaN</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">-</span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">));</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#6C7834;">it</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;for non-integer n the result is NaN&quot;</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">assert</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">isNaN</span><span style="color:#8E8F8B;">(</span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#296AA3;">2</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">1.5</span><span style="color:#8E8F8B;">));</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">});</span></span>
<span class="line"><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>新测试的结果: <img src="/my-note/assets/Mocha6.f56c2f39.jpg" alt="图片"> 新加的测试失败了，因为我们的实现方式是不支持它们的。这就是 BDD 的做法：我们首先写一些暂时无法通过的测试，然后去实现它们。</p><blockquote><p><strong>Other assertions</strong> 请注意断言语句<code>assert.isNaN</code>:它用来检查<code>NaN</code>。 在<a href="http://chaijs.com/" target="_blank" rel="noopener noreferrer">Chai</a>中也有其他的断言，例如:</p><ul><li><code>assert.equal(value1,value2)</code>--检查相等<code>value1 == value2</code></li><li><code>assert.strictEqual(value1,value2)</code>--检查严格相等<code>value1 === value2</code> &gt; <code>assert.notEqual</code>,<code>assert.noStrictEqual</code>--执行和上面相仿的检查。</li><li><code>assert.isTrue(value)</code>--检查<code>value === true</code>。</li><li><code>assert.isFalse(value)</code>--检查<code>value === false</code>。</li><li>......完整的列表请见<a href="http://chaijs.com/api/assert/" target="_blank" rel="noopener noreferrer">docs</a></li></ul></blockquote><p>因此我们应该给<code>pow</code>再加几行:</p><div class="language-js line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">pow</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">n</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">n</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">NaN</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">(</span><span style="color:#A65E2B;">Math</span><span style="color:#8E8F8B;">.</span><span style="color:#B58451;">round</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">n</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">!=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">n</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">NaN</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">result</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">1</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">for</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">(</span><span style="color:#AB5959;">let</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">i</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">0</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">i</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">&lt;</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">n</span><span style="color:#8E8F8B;">;</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">i</span><span style="color:#AB5959;">++</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">result</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">*=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">x</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">result</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>现在它可以工作了，所有的测试也都通过了: <img src="/my-note/assets/Mocha7.b83ccb39.jpg" alt="图片"></p><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-hidden="true">#</a></h2><p>在 BDD 中，规范先行，实现在后。最好我们同时拥有了规范和代码。</p><p>规范有三种使用方式:<br> 1.作为<strong>测试</strong>--保证代码正确工作。<br> 2.作为<strong>文档</strong>--<code>describe</code>和<code>it</code>的标题告诉我们函数做了什么。<br> 3.作为<strong>案例</strong>--测试实际工作的例子展示了一个函数可以被怎样使用。</p><p>有了规范，我们可以安全地改进、修改甚至重写函数，并确保它仍然正确地工作。</p><p>这在一个函数会被用在多个地方的大型项目中尤其重要。当我们改变这样一个函数时，没有办法手动检查每个使用它们的地方是否仍旧正确。</p><p>如果没有测试，一般有两个办法：<br> 1.展示修改，无论修改了什么。然后我们的用户遇到了 bug，这应该是我们没有手动完成某些检查。<br> 2.如果对出错的惩罚比较严重，并且没有测试，那么大家会很害怕修改这样的函数，然后这些代码就会越来越陈旧，没有人会想接触它。这很不利于发展。</p><p><strong>自动化测试有助于避免这样的问题</strong></p><p>如果这个项目被测试代码覆盖了，就不会出现这种问题。在任何修改之后，我们都可以运行测试，并在几秒内看到大量的检查。</p><p><strong>另外，一个经过良好测试的代码通常都有更好的架构</strong></p><p>当然，这是因为覆盖了自动化测试的代码更容易修改和改进。但还有另一个原因。</p><p>要编写测试，代码的组织方式应确保每个函数都有一个清晰描述的任务、定义良好的输入和输出。这意味着从一开始就有一个好的架构。</p><p>在实际开发中有时候可能并不容易，有时候很难在写实际代码之前编写规范，因为还不清楚它应该如何表现。但一般来说，编写测试使得开发更快更稳定。</p></div></div></main><footer class="VPDocFooter" data-v-79ca2460 data-v-04568844><div class="edit-info" data-v-04568844><!----><!----></div><div class="prev-next" data-v-04568844><div class="pager" data-v-04568844><a class="pager-link prev" href="/my-note/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/3_4NinjaCode.html" data-v-04568844><span class="desc" data-v-04568844>Previous page</span><span class="title" data-v-04568844>3.4忍者代码</span></a></div><div class="has-prev pager" data-v-04568844><a class="pager-link next" href="/my-note/%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F/3_6Polyfill.html" data-v-04568844><span class="desc" data-v-04568844>Next page</span><span class="title" data-v-04568844>3.6 Polyfill和转译器</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-6b5fd0a9 data-v-5b331722><div class="container" data-v-5b331722><p class="message" data-v-5b331722>Released under the MIT License.</p><p class="copyright" data-v-5b331722>Copyright © 2022-present zqm &amp; my-note Contributors</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"js基础知识_2_10conditionalbranch.md\":\"f975a9aa\",\"js基础知识_2_11logicaloperator.md\":\"06e0167a\",\"js基础知识_2_12nullishcoalescing.md\":\"c37ce44d\",\"js基础知识_2_13circulation.md\":\"e0ada73c\",\"js基础知识_2_14switch.md\":\"d6ddb5d7\",\"js基础知识_2_15function.md\":\"9e963a23\",\"js基础知识_2_16functionexpression.md\":\"069ae80e\",\"js基础知识_2_17arrowfunction.md\":\"360f01e1\",\"js基础知识_2_18jsspeciality.md\":\"84525a43\",\"js基础知识_2_1helloworld.md\":\"5fb9c01e\",\"js基础知识_2_2code-structure.md\":\"78717c1b\",\"js基础知识_2_3use-strict.md\":\"a6456689\",\"js基础知识_2_4variate.md\":\"7d501339\",\"js基础知识_2_5datatype.md\":\"294f2381\",\"js基础知识_2_6interact.md\":\"59940af7\",\"js基础知识_2_7typecast.md\":\"f3b1f635\",\"js基础知识_2_8baseoperator.md\":\"82b94ab3\",\"js基础知识_2_9valuecomparison.md\":\"95d32c2b\",\"js简介_1_1introduction.md\":\"cf6dcb2a\",\"js简介_1_2standard.md\":\"412ad017\",\"js简介_1_3code-editor.md\":\"02935292\",\"js简介_1_4console.md\":\"2e030230\",\"object基础知识_4_1object.md\":\"1c24b596\",\"object基础知识_4_2copy.md\":\"3a38c9b8\",\"object基础知识_4_3recycle.md\":\"484bf0e5\",\"object基础知识_4_4method.md\":\"ce822c07\",\"object基础知识_4_5constructor.md\":\"0b95effd\",\"object基础知识_4_6optionalchain.md\":\"97fd5e88\",\"object基础知识_4_7symbol.md\":\"83e2196d\",\"object基础知识_4_8valueconversion.md\":\"f5579f32\",\"index.md\":\"1725269e\",\"代码质量_3_1debug.md\":\"912c2d2f\",\"代码质量_3_2codestyle.md\":\"2acef5ff\",\"代码质量_3_3annotation.md\":\"c8344147\",\"代码质量_3_4ninjacode.md\":\"92447e38\",\"代码质量_3_5mocha.md\":\"3fc1eff3\",\"代码质量_3_6polyfill.md\":\"85ee86c4\",\"函数进阶内容_6_10funcbind.md\":\"e8ea01e7\",\"函数进阶内容_6_11arrowfunction.md\":\"3adbbeef\",\"函数进阶内容_6_1recursion.md\":\"97470fe5\",\"函数进阶内容_6_2rest.md\":\"3ed04ee1\",\"函数进阶内容_6_3closure.md\":\"f59d8dc0\",\"函数进阶内容_6_4var.md\":\"be8b66da\",\"函数进阶内容_6_5globalobject.md\":\"aca6004a\",\"函数进阶内容_6_6funcobj.md\":\"306575f8\",\"函数进阶内容_6_7newfunc.md\":\"5af7c76b\",\"函数进阶内容_6_8dispatch.md\":\"f6a92842\",\"函数进阶内容_6_9decorator.md\":\"3082809f\",\"数据类型_5_10destructuring.md\":\"bf9cdd2e\",\"数据类型_5_11date.md\":\"f5cdb012\",\"数据类型_5_12json.md\":\"8dff9800\",\"数据类型_5_1primitivetypemethods.md\":\"f9a41bb1\",\"数据类型_5_2numbertype.md\":\"79c079f4\",\"数据类型_5_3string.md\":\"54c10af3\",\"数据类型_5_4array.md\":\"4ef8aa1d\",\"数据类型_5_5arraymethod.md\":\"6800b915\",\"数据类型_5_6iterableobject.md\":\"929a33c3\",\"数据类型_5_7mapset.md\":\"6d82ae96\",\"数据类型_5_8weakmapweakset.md\":\"dc109d1c\",\"数据类型_5_9objectkeys.md\":\"8868a331\"}")</script>
    <script type="module" async src="/my-note/assets/app.28edb484.js"></script>
    
  </body>
</html>